<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:local="clr-namespace:GWvW_Overlay" 
        mc:Ignorable="d" x:Name="MainWindow1" x:Class="GWvW_Overlay.MainWindow" Title="GWvW Overlay" 
        WindowStartupLocation="CenterScreen" WindowStyle="None" Height="{Binding Options.height}" Width="{Binding Options.width}" MinHeight="{Binding Options.height}" MinWidth="{Binding Options.width}"
        Foreground="{x:Null}" Background="{x:Null}" ResizeMode="CanResizeWithGrip" SizeToContent="WidthAndHeight"
        AllowsTransparency="True" Left="Auto" Topmost="True" Opacity="{Binding Source={x:Static Properties:Settings.Default}, Path=opticity}" MouseDown="Drag" Loaded="onLoad"
        xmlns:Properties="clr-namespace:GWvW_Overlay.Properties">

    <Window.Resources>
        <local:getIMG x:Key="getIMG" />
        <local:getClaimed x:Key="getClaimed" />
        <local:getName x:Key="getName" />
    </Window.Resources>

    <Grid>
        
    <ItemsControl Name="Icons">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Canvas>
                    <Image Height="24" Width="24" Stretch="Fill">
                        <Image.Source>
                            <MultiBinding Converter="{StaticResource getIMG}">
                                <Binding Path="ObjData.type"/>
                                <Binding Path="owner"/>
                            </MultiBinding>
                        </Image.Source>
                    </Image>
                    <Label Content="{Binding time_left}" Width="100" Canvas.Top="-20" Canvas.Left="-38" Height="36" Padding="0" HorizontalContentAlignment="Center" Foreground="White"/>
                        <Label Content="{Binding Path=ObjData.name, Converter={StaticResource getName}}" Width="100" Canvas.Top="20" Canvas.Left="-40" Height="36" Padding="0" HorizontalContentAlignment="Center" Foreground="White" />

                        <Image Height="14" Canvas.Left="12" Canvas.Top="12" Width="12" Panel.ZIndex="60" Source="{Binding Path=owner_guild, Converter={StaticResource getClaimed}}"/>
                    </Canvas>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <Canvas>
                    <Canvas.Background>
                        <ImageBrush Stretch="Uniform" ImageSource="{Binding Options.active_map_img}" />
                    </Canvas.Background>
                </Canvas>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemContainerStyle>
            <Style TargetType="{x:Type ContentPresenter}">
                <Setter Property="Canvas.Left" Value="{Binding ObjData.left}" />
                <Setter Property="Canvas.Top" Value="{Binding ObjData.top}" />
            </Style>
        </ItemsControl.ItemContainerStyle>
    </ItemsControl>

        <Canvas HorizontalAlignment="Center">
            <Label Content="{Binding Options.active_bl_title}" Height="24" Opacity="0.5" Width="300" Canvas.Left="-150" FontSize="16" Foreground="White" FontWeight="Bold" Padding="5,0,0,0" HorizontalContentAlignment="Center">
                <Label.Background>
                    <ImageBrush ImageSource="Resources/panel2.png"/>
                </Label.Background>
            </Label>
        </Canvas>
    </Grid>
</Window>
