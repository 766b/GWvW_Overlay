using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Newtonsoft.Json;

namespace Arena.NET_Tests
{
    [TestClass]
    public class Request
    {
        [TestMethod]
        public void WvWMatchDeserialization()
        {
            var result = JsonConvert.DeserializeObject<ArenaNET.WvWMatch>(testJSON);
            Assert.IsNotNull(result);
            result.Maps.ForEach(m => m.Objectives.ForEach(o =>
            {
                Assert.IsNotNull(o);
                Console.WriteLine(o.Name);
                Assert.IsFalse(String.IsNullOrEmpty(o.Name));
            }));
            Console.WriteLine(result);
        }


        [TestMethod]
        public void WvWMatch()
        {
            var result = ArenaNET.Request.GetResource<ArenaNET.WvWMatch>("2-1");
            Assert.IsNotNull(result);
            result.Maps.ForEach(m => m.Objectives.ForEach(o =>
            {
                Assert.IsNotNull(o);
                Console.WriteLine(o.Name);
                Assert.IsFalse(String.IsNullOrEmpty(o.Name));
            }));
            Console.WriteLine(result);

        }
        [TestMethod]
        public void WvWMatches()
        {
            var result = ArenaNET.Request.GetResourceList<ArenaNET.WvWMatch>();
            Assert.IsNotNull(result);
            Assert.IsTrue(result.Count > 1);
            Console.WriteLine(result);
        }


        [TestMethod]
        public void World()
        {
            var result = ArenaNET.Request.GetResourceList<ArenaNET.World>();
            Assert.AreEqual(51, result.Count);
            ArenaNET.Request.Lang = "en";
            var sresult = ArenaNET.Request.GetResource<ArenaNET.World>("1001");
            Assert.AreEqual("Anvil Rock", sresult.Name);
        }

        const String testJSON = "{  \"id\": \"2-1\",  \"start_time\": \"2015-10-16T18:00:00Z\",  \"end_time\": \"2015-10-23T18:00:00Z\",  \"scores\": {    \"red\": 150367,    \"blue\": 126274,    \"green\": 181803  },  \"worlds\": {    \"red\": 2202,    \"blue\": 2101,    \"green\": 2201  },  \"maps\": [    {      \"id\": 94,      \"type\": \"RedHome\",      \"scores\": {        \"red\": 57974,        \"blue\": 16091,        \"green\": 25883      },      \"bonuses\": [        {          \"type\": \"Bloodlust\",          \"owner\": \"Green\"        }      ],      \"objectives\": [        {          \"id\": \"94-32\",          \"type\": \"Keep\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T18:01:18Z\",          \"claimed_by\": \"817EC66B-E457-4457-BD54-17744B27D2ED\",          \"claimed_at\": \"2015-10-21T18:01:47Z\"        },        {          \"id\": \"94-33\",          \"type\": \"Keep\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T17:40:04Z\",          \"claimed_by\": \"D7273436-DD11-E511-AF00-AC162DC028B5\",          \"claimed_at\": \"2015-10-21T18:12:39Z\"        },        {          \"id\": \"94-35\",          \"type\": \"Tower\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T17:16:09Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"94-37\",          \"type\": \"Keep\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-20T21:25:34Z\",          \"claimed_by\": \"FEE8F7B7-17B5-E411-AF00-AC162DC028B5\",          \"claimed_at\": \"2015-10-21T08:16:30Z\"        },        {          \"id\": \"94-39\",          \"type\": \"Camp\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:16:03Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"94-52\",          \"type\": \"Camp\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T18:11:09Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"94-53\",          \"type\": \"Camp\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T17:58:22Z\",          \"claimed_by\": \"F653D28A-867C-43CC-A52A-984DDFF0FBEC\",          \"claimed_at\": \"2015-10-21T18:02:49Z\"        },        {          \"id\": \"94-36\",          \"type\": \"Tower\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T17:37:11Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"94-50\",          \"type\": \"Camp\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T18:08:58Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"94-34\",          \"type\": \"Camp\",          \"owner\": \"Blue\",          \"last_flipped\": \"2015-10-21T18:08:27Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"94-38\",          \"type\": \"Tower\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:15:28Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"94-40\",          \"type\": \"Tower\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T18:15:44Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"94-51\",          \"type\": \"Camp\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T17:43:36Z\",          \"claimed_by\": \"D474EAA9-3C26-4CEC-83DD-8382D12C44A1\",          \"claimed_at\": \"2015-10-21T18:05:38Z\"        },        {          \"id\": \"94-62\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T18:00:54Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"94-63\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T17:58:06Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"94-64\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T17:18:03Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"94-65\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T17:56:52Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"94-66\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T17:58:26Z\",          \"claimed_by\": null,          \"claimed_at\": null        }      ],      \"deaths\": {        \"red\": 0,        \"blue\": 0,        \"green\": 0      },      \"kills\": {        \"red\": 0,        \"blue\": 0,        \"green\": 0      }    },    {      \"id\": 95,      \"type\": \"GreenHome\",      \"scores\": {        \"red\": 20251,        \"blue\": 10560,        \"green\": 67909      },      \"bonuses\": [        {          \"type\": \"Bloodlust\",          \"owner\": \"Green\"        }      ],      \"objectives\": [        {          \"id\": \"95-43\",          \"type\": \"Camp\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:10:51Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"95-41\",          \"type\": \"Keep\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T17:47:48Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"95-42\",          \"type\": \"Tower\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:13:27Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"95-44\",          \"type\": \"Keep\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:07:30Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"95-45\",          \"type\": \"Tower\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:11:09Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"95-46\",          \"type\": \"Keep\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T03:44:44Z\",          \"claimed_by\": \"4673535A-E874-41F7-8F59-EFBA5FD3F5D3\",          \"claimed_at\": \"2015-10-21T10:18:21Z\"        },        {          \"id\": \"95-47\",          \"type\": \"Tower\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T03:36:31Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"95-48\",          \"type\": \"Camp\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T18:14:03Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"95-49\",          \"type\": \"Camp\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:09:00Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"95-54\",          \"type\": \"Camp\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T18:08:03Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"95-55\",          \"type\": \"Camp\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T17:44:10Z\",          \"claimed_by\": \"4E990D07-EF4C-E511-AF00-AC162DC028B5\",          \"claimed_at\": \"2015-10-21T18:14:19Z\"        },        {          \"id\": \"95-56\",          \"type\": \"Camp\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T17:59:17Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"95-57\",          \"type\": \"Tower\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T08:24:16Z\",          \"claimed_by\": \"1F5BFBF7-D3BB-E311-8D3D-AC162DC0A8ED\",          \"claimed_at\": \"2015-10-21T17:14:03Z\"        },        {          \"id\": \"95-72\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T18:08:04Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"95-73\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T18:09:26Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"95-74\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T17:53:15Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"95-75\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T15:05:28Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"95-76\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T17:43:36Z\",          \"claimed_by\": null,          \"claimed_at\": null        }      ],      \"deaths\": {        \"red\": 0,        \"blue\": 0,        \"green\": 0      },      \"kills\": {        \"red\": 0,        \"blue\": 0,        \"green\": 0      }    },    {      \"id\": 96,      \"type\": \"BlueHome\",      \"scores\": {        \"red\": 18396,        \"blue\": 51759,        \"green\": 27317      },      \"bonuses\": [        {          \"type\": \"Bloodlust\",          \"owner\": \"Blue\"        }      ],      \"objectives\": [        {          \"id\": \"96-23\",          \"type\": \"Keep\",          \"owner\": \"Blue\",          \"last_flipped\": \"2015-10-21T03:35:02Z\",          \"claimed_by\": \"864C981C-5862-4602-8DC7-7B9ACA658EE8\",          \"claimed_at\": \"2015-10-21T06:09:56Z\"        },        {          \"id\": \"96-27\",          \"type\": \"Keep\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T17:33:17Z\",          \"claimed_by\": \"14F35F54-4D56-E511-925A-AC162DAE5AD5\",          \"claimed_at\": \"2015-10-21T18:08:43Z\"        },        {          \"id\": \"96-28\",          \"type\": \"Tower\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:14:28Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"96-30\",          \"type\": \"Tower\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T18:11:22Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"96-24\",          \"type\": \"Camp\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:11:45Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"96-25\",          \"type\": \"Tower\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T15:53:16Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"96-26\",          \"type\": \"Tower\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:16:16Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"96-29\",          \"type\": \"Camp\",          \"owner\": \"Blue\",          \"last_flipped\": \"2015-10-21T18:12:47Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"96-31\",          \"type\": \"Keep\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T18:02:22Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"96-58\",          \"type\": \"Camp\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T18:08:04Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"96-59\",          \"type\": \"Camp\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T18:05:04Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"96-60\",          \"type\": \"Camp\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T18:15:23Z\",          \"claimed_by\": \"E3478371-C222-41B8-9CA8-7D48B15B745B\",          \"claimed_at\": \"2015-10-21T18:15:25Z\"        },        {          \"id\": \"96-61\",          \"type\": \"Camp\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:15:21Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"96-67\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T15:02:14Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"96-68\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T17:54:42Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"96-69\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T18:09:31Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"96-70\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T18:13:30Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"96-71\",          \"type\": \"Ruins\",          \"owner\": \"Neutral\",          \"last_flipped\": \"2015-10-21T17:48:58Z\",          \"claimed_by\": null,          \"claimed_at\": null        }      ],      \"deaths\": {        \"red\": 0,        \"blue\": 0,        \"green\": 0      },      \"kills\": {        \"red\": 0,        \"blue\": 0,        \"green\": 0      }    },    {      \"id\": 38,      \"type\": \"Center\",      \"scores\": {        \"red\": 53746,        \"blue\": 47864,        \"green\": 60694      },      \"bonuses\": [],      \"objectives\": [        {          \"id\": \"38-1\",          \"type\": \"Keep\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-20T07:55:34Z\",          \"claimed_by\": \"9A6DE96F-5D48-E511-9021-E4115BDFA895\",          \"claimed_at\": \"2015-10-20T08:25:28Z\"        },        {          \"id\": \"38-5\",          \"type\": \"Camp\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T17:54:31Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-18\",          \"type\": \"Tower\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:11:21Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-19\",          \"type\": \"Tower\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T15:25:12Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-20\",          \"type\": \"Tower\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-20T09:46:52Z\",          \"claimed_by\": \"37B1D3D9-E6F0-46CE-80FD-B040529BB938\",          \"claimed_at\": \"2015-10-20T14:32:36Z\"        },        {          \"id\": \"38-2\",          \"type\": \"Keep\",          \"owner\": \"Blue\",          \"last_flipped\": \"2015-10-20T04:13:38Z\",          \"claimed_by\": \"E70E49B6-70A0-E311-BE98-E4115BDFC985\",          \"claimed_at\": \"2015-10-20T08:17:35Z\"        },        {          \"id\": \"38-7\",          \"type\": \"Camp\",          \"owner\": \"Blue\",          \"last_flipped\": \"2015-10-21T18:04:03Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-15\",          \"type\": \"Tower\",          \"owner\": \"Blue\",          \"last_flipped\": \"2015-10-21T12:49:59Z\",          \"claimed_by\": \"5D6B6387-29FE-449A-ADDB-FA7E06FD1ACA\",          \"claimed_at\": \"2015-10-21T17:38:43Z\"        },        {          \"id\": \"38-16\",          \"type\": \"Tower\",          \"owner\": \"Blue\",          \"last_flipped\": \"2015-10-21T18:09:56Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-22\",          \"type\": \"Tower\",          \"owner\": \"Blue\",          \"last_flipped\": \"2015-10-21T16:21:53Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-3\",          \"type\": \"Keep\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T17:34:09Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-4\",          \"type\": \"Camp\",          \"owner\": \"Blue\",          \"last_flipped\": \"2015-10-21T18:12:59Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-6\",          \"type\": \"Camp\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:12:22Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-8\",          \"type\": \"Camp\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T18:15:55Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-9\",          \"type\": \"Castle\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T17:25:59Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-10\",          \"type\": \"Camp\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:05:11Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-11\",          \"type\": \"Tower\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T17:34:02Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-12\",          \"type\": \"Tower\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T18:09:04Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-13\",          \"type\": \"Tower\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T04:57:29Z\",          \"claimed_by\": \"59B6BDD9-0B10-4A64-8C1A-FD0ACD71982C\",          \"claimed_at\": \"2015-10-21T07:43:27Z\"        },        {          \"id\": \"38-14\",          \"type\": \"Tower\",          \"owner\": \"Green\",          \"last_flipped\": \"2015-10-21T15:58:46Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-17\",          \"type\": \"Tower\",          \"owner\": \"Red\",          \"last_flipped\": \"2015-10-21T17:54:00Z\",          \"claimed_by\": null,          \"claimed_at\": null        },        {          \"id\": \"38-21\",          \"type\": \"Tower\",          \"owner\": \"Blue\",          \"last_flipped\": \"2015-10-21T18:08:23Z\",          \"claimed_by\": null,          \"claimed_at\": null        }      ],      \"deaths\": {        \"red\": 0,        \"blue\": 0,        \"green\": 0      },      \"kills\": {        \"red\": 0,        \"blue\": 0,        \"green\": 0      }    }  ]}";
    }
}
